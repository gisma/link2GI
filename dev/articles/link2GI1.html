<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Link GI to R • link2GI</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Link GI to R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">link2GI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Version">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/link2GI1.html">Link GI to R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-spatial/link2GI">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Link GI to R</h1>
                        <h4 class="author">Chris Reudenbach</h4>
            
            <h4 class="date">2019-11-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/link2GI/blob/master/vignettes/link2GI1.Rmd"><code>vignettes/link2GI1.Rmd</code></a></small>
      <div class="hidden name"><code>link2GI1.Rmd</code></div>

    </div>

    
    
<div id="what-is-link2gi" class="section level1">
<h1 class="hasAnchor">
<a href="#what-is-link2gi" class="anchor"></a>What is link2GI?</h1>
<p>The <a href="https://CRAN.R-project.org/package=link2GI">link2GI</a> package provides a small linking tool to simplify the usage of <code>GRASS GIS</code>, <code>SAGA GIS</code>, <code>Orfeo Toolbox</code> (<code>OTB</code>) and <code>GDAL</code> binaries for R users. the focus is to simplify the the accessibility of this software for non operating system specialists or highly experienced GIS geeks. Acutally it is a direct result of numerous graduate courses with R(-GIS) beginners in the hostile world of university computer pools running under extremely restricted Windows systems.</p>
<p>This vignette:</p>
<ul>
<li>shows how to use <code>link2GI</code> according to specific system requirements</li>
<li>gives some hands on examples of how to use<br>
</li>
<li>give some applied examples for more efficient spatial analysis</li>
</ul>
</div>
<div id="why-link2gi-now" class="section level1">
<h1 class="hasAnchor">
<a href="#why-link2gi-now" class="anchor"></a>Why link2GI now?</h1>
<p>R has quite a lot of classes for storing and dealing with spatial data. For vector data the <a href="https://CRAN.R-project.org/package=sp">sp</a> and recently the great <a href="https://CRAN.R-project.org/package=sf">sf</a> packages are well known and the raster data world is widely covered by the <a href="https://CRAN.R-project.org/package=raster">raster</a> package. Additionally external spatial data formats are interfaced by wrapping packages as <a href="https://CRAN.R-project.org/package=rgdal">rgdal</a> or <a href="https://CRAN.R-project.org/package=gdalUtils">gdalUtils</a>. For more specific links as needed for manipulating atmospheric modeling packages as <a href="https://CRAN.R-project.org/package=ncdf4">ncdf4</a> are very helpful.</p>
<p>The spatial analysis itself is often supported by wrapper packages that integrate external libraries, command line tools or a mixture of both in an R-like syntax <a href="https://CRAN.R-project.org/package=rgeos">rgeos</a>, <a href="https://CRAN.R-project.org/package=geosphere">geosphere</a>, <a href="https://CRAN.R-project.org/package=Distance">Distance</a>, <a href="https://CRAN.R-project.org/package=maptools">maptools</a>, <a href="https://CRAN.R-project.org/package=igraph">igraph</a> or <a href="https://CRAN.R-project.org/package=spatstat">spatstat</a>.</p>
<p>A comprehensive introduction to the spatial R-biotope and its backgrounds is excellently treated in <a href="https://geocompr.robinlovelace.net">Geocomputation with R</a> wich is highly recommend as a reference textbook.</p>
<p>Despite all this capabilities of spatial analysis and data handling in the world of <code>R</code>, it can be stated (at least from a non-R point of view), that there is still a enormous gap between R and the mature open source Geographic Information System (GIS) and even more Remote Sensing (RS) software community. <code>QGIS</code>, <code>GRASS GIS</code> and <code>SAGA GIS</code> are providing a comprehensive, growing and mature collection of highly sophisticated algorithms. The provided algorithms are fast, stable and most of them are well proofed. Probably most of the <code>R</code> users who are somehow related to the GI community know that there are awesome good wrapper packages for bridging this gap. For <a href="https://grass.osgeo.org/">GRASS GIS 7</a> it is <a href="https://CRAN.R-project.org/package=rgrass7">rgrass7</a> and for <a href="http://www.saga-gis.org/">SAGA GIS</a> the <a href="https://CRAN.R-project.org/package=RSAGA">RSAGA</a> package. The development of the <a href="https://CRAN.R-project.org/package=RQGIS">RQGIS</a> wrapper is the most recent outcome to provide a simple usage of the powerful <a href="https://www.qgis.org/">QGIS</a> command line interface. In addition there is no wrapper for the great <code>OTB</code>. It seems to be at least convenient to provide a lightweight wrapping utility for the usage of <code>OTB</code> modules from <code>R</code>.</p>
<p>Unfortunately one will run into a lot of technical problems depending on the choosen operating system (OS) or library dependencies or GIS software versions. In case of e.g. <code>RSAGA</code> the main problem has been that the <code>SAGA</code> GIS developers are not only changing the syntax and strategy of the command line interface (CLI) but also within the same release the calls differ from OS to OS. So the maintenance of RSAGA is at least laborious (but thumbs up is running again). Another example is given by <code>GRASS GIS</code> which is well known for a sophisticated setup of the environment and the spatial properties of the database. If you “just” want to use a specific <code>GRASS</code> algorithm from R, you will probablys get lost in setting up all OS-dependencies that are neccessary to set up a correct temporary or permanent <code>GRASS</code>-environment from “outside”. This is not only caused due to the strict spatial and projection requirements of <code>GRASS</code> but much more by challenging OS enviroments especially Windows.</p>
<p>To make it short it is a bit cumbersome to deal with all this stuff if one just want to start e.g. <code>GRASS</code> from the R command line for e.g. a powerful random walk cost analysis (<code>r.walk</code>) call as provided by <code>GRASS</code>.</p>
</div>
<div id="what-means-linking" class="section level1">
<h1 class="hasAnchor">
<a href="#what-means-linking" class="anchor"></a>What means linking?</h1>
<p>Linking means simply to provide all necessary environment settings that satisfy the existing wrapper packages as well as in addition the full access to the the command line (CLI) APIs of the mentioned software tools. <code>link2GI</code> tries to analyze which software is installed to set up an temporary enviroment meeting the above mentioned needs.</p>
<div id="grass-gis" class="section level3">
<h3 class="hasAnchor">
<a href="#grass-gis" class="anchor"></a>GRASS GIS</h3>
<p><code>GRASS GIS</code> has the most challenging requirements. It needs a bunch of environment and path variables as <strong>and</strong> a correct setup of the geographical data parameters. The <code>linkGRASS7</code> function tries to find all installations let you (optionally) choose the one you want to use and generate the necessary variables. As a result you can use both the rgrass7 package or the command line <code>API</code> of <code>GRASS</code>.</p>
</div>
<div id="saga-gis" class="section level3">
<h3 class="hasAnchor">
<a href="#saga-gis" class="anchor"></a>SAGA GIS</h3>
<p><code>SAGA GIS</code> is a far easier to set up. Again the <code>linkSAGA</code> function tries to find all <code>SAGA</code> installations, let you (optionally) choose one and generate the necessary variables. You may also use <code>RSAGA</code> but you have to hand over the result of <code>linkSAGA</code> like <code><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">RSAGA::rsaga.env(path = saga$sagaPath)</a></code>. For a straightforward usage you may simply use the <code>R</code> system() call to interface <code>R</code> with the <code>saga_cmd</code> API.</p>
</div>
<div id="orfeo-toolbox-otb" class="section level3">
<h3 class="hasAnchor">
<a href="#orfeo-toolbox-otb" class="anchor"></a>Orfeo Toolbox (OTB)</h3>
<p>The <code>Orfeo Toolbox</code> (OTB) is a very powerful remote sensing toolbox. It is widely used for classification, filtering and machine learning applications. You will find some of the implemented algorithm within different R packages but <strong>always</strong> much slower or only running on small data chunks. <code>link2GI</code> searches and connects all <code>OTB</code> installations of a given search path and provides the result as a clear list. Due to a missing wrapper package, a list-based <code>OTB</code> module and function parser is also available, which can be piped into the function <code>runOTB</code> for a convenient function call.</p>
</div>
<div id="gdal" class="section level3">
<h3 class="hasAnchor">
<a href="#gdal" class="anchor"></a>GDAL</h3>
<p>Notwithstanding that <code>GDAL</code> is perfectly integrated in R in some cases it is beneficial to use system calls and grab the binaries directly. In particular the evolution to <code>GDAL 3.x</code> and optionally various boxed versions of <code>GDAL</code> binaries working together with different <code>Python</code> and <code>proj4/proj6</code> libs makes it sometimes difficult to grab the correct version of <code>GDAL</code>. <code>link2GI</code> generates a list of all pathes and commands of all <code>GDAL</code> installation in the provided search path. With this list, you can easily use all available API calls of each installation.</p>
</div>
</div>
<div id="usage-of-the-link2gi-package---basic-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#usage-of-the-link2gi-package---basic-examples" class="anchor"></a>Usage of the link2GI package - Basic Examples</h1>
<div id="brute-force-search-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#brute-force-search-usage" class="anchor"></a>Brute force search usage</h2>
<p>Automatic search and find of the installed GIS software binaries is performed by the <code>find</code> functions. Depending of you OS and the number of installed versions you will get a dataframe providing the binary and module folders.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># find all SAGA GIS installations at the default search location</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">saga &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findSAGA.html">findSAGA</a></span>()</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">saga</a></code></pre></div>
<p>Same with <code>GRASS</code> and <code>OTB</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># find all SAGA GIS installations at the default search location</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">grass &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findGRASS.html">findGRASS</a></span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">grass</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">otb &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findOTB.html">findOTB</a></span>()</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">otb</a></code></pre></div>
<p>The <code>find</code> functions are providing an overview of the installed software. This functions are not establishing any linkages or changing settings.</p>
</div>
<div id="setting-up-project-structures" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-project-structures" class="anchor"></a>Setting up project structures</h2>
<p>If you just call link2GI on the fly , that means for a single temporary operation, there will be no need for setting up folders and project structures. If you work on a more complex project it is seems to be helpful to support this by a fixed structure. Same with existing <code>GRASS</code> projects wich need to be in specific mapsets and locations.</p>
<p>A straightforward (you may call it also dirty) approach is the ìnitProj`function that creates folder structures (if not existing) and establishes (if wanted) global variables containing the pathes as strings.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># find all SAGA GIS installations at the default search location</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/initProj.html">initProj</a></span>(<span class="dt">projRootDir =</span> <span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                 <span class="dt">projFolders =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"data/"</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                                 <span class="st">"data/level0/"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">                                 <span class="st">"data/level1/"</span>,</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">                                  <span class="st">"output/"</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">                                  <span class="st">"run/"</span>,</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">                                  <span class="st">"fun/"</span>),</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">                 <span class="dt">path_prefix =</span> <span class="st">"path_to_"</span> ,</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">                 <span class="dt">global =</span><span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="linksaga---locate-and-set-up-saga-api-bindings" class="section level2">
<h2 class="hasAnchor">
<a href="#linksaga---locate-and-set-up-saga-api-bindings" class="anchor"></a>linkSAGA - Locate and set up ‘SAGA’ API bindings</h2>
<p>In earlier times it has been pretty cumbersome to link the correct <code>SAGA GIS</code> version. Since the version 1.x.x of <code>RSAGA</code> things turned much better. The new <code><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">RSAGA::rsaga.env()</a></code> function is at getting the first <code>RSAGA</code> version in the search path. For using <code>RSAGA</code> with <code>link2GI</code> it is strongly recommended to call <code>RSAGA.env()</code> with the preferred path as provided by a ’ <code><a href="../reference/findSAGA.html">findSAGA()</a></code> call. It is also possible to provide the version number as shown below. Storing the result in adequate variables will then even give the opportunity to easyly switch between different <code>SAGA GIS</code> installations.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">saga1&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkSAGA.html">linkSAGA</a></span>(<span class="dt">ver_select =</span> <span class="dv">1</span>) </a>
<a class="sourceLine" id="cb4-2" data-line-number="2">saga1</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">sagaEnv1&lt;-<span class="st"> </span>RSAGA<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">rsaga.env</a></span>(<span class="dt">path =</span> saga1<span class="op">$</span>sagaPath)</a></code></pre></div>
</div>
<div id="linkgrass7---locate-and-set-up-grass-7-api-bindings" class="section level2">
<h2 class="hasAnchor">
<a href="#linkgrass7---locate-and-set-up-grass-7-api-bindings" class="anchor"></a>linkGRASS7 - Locate and set up ‘GRASS 7’ API bindings</h2>
<p><code>linkGRASS7</code> Initializes the session environment and the system paths for an easy access to <code>GRASS GIS 7.x.</code> The correct setup of the spatial and projection parameters is automatically performed by using either an existing and valid <code>raster</code>, <code>sp</code> or <code>sf</code> object, or manually by providing a list containing the minimum parameters needed. These properties are used to initialize either a temporary or a permanent <code>rgrass7</code> environment including the correct <code>GRASS 7</code> database structure. If you provide none of the before mentioned objects <code>linkGRASS</code> will create a EPSG:4326 world wide location.</p>
<p>The most time consuming part on ‘Windows’ Systems is the search process. This can easily take 10 or more minutes. To speed up this process you can also provide a correct parameter set. Best way to do so is to call manually <code>findGRASS</code>. Then call <code>linkGRASS7</code> with the returned version arguments of your choice.</p>
<p>The function <code>linkGRASS7</code> tries to find all valid <code>GRASS GIS</code> binaries by analyzing the startup script files of <code>GRASS GIS</code>. After identifying the <code>GRASS GIS</code> binaries all necessary system variables and settings will be generated and passed to a temporary <code>R</code> environment.</p>
<p>If you have more than one valid installation and run <code>linkGRASS7</code> with the arguments <code>select_ver = TRUE</code>, then you will be ask to select one.</p>
<div id="standard-full-search-usage" class="section level4">
<h4 class="hasAnchor">
<a href="#standard-full-search-usage" class="anchor"></a>Standard Full Search Usage</h4>
<p>The most common way to use <code>GRASS</code> is just for one call or algorithm. So the user is not interested in the cumbersome setting up of all parameters. <code>linGRASS7(georeferenced-dataset)</code> does an automatic search and find all <code>GRASS</code> binaries using the georeferenced-dataset object for spatial referencing and the necessary other settings. <strong>NOTE:</strong> This is the highly recommended linking procedure for all on the fly calls of <code>GRASS</code>. Please note also: If more than one <code>GRASS</code> installation is found the one with the highest version number is selected automatically.</p>
<p>Have a look at the following examples which show a typical call for the well known <code>sp</code>and <code>sf</code> vector data objects.</p>
<p>Starting with <code>sp</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># get meuse data as sp object and link it temporary to GRASS</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sp)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co"># get data </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(meuse) </a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co"># add georeference</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/pkg/sp/man/coordinates.html">coordinates</a></span>(meuse) &lt;-<span class="st"> </span><span class="er">~</span>x<span class="op">+</span>y </a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="kw"><a href="https://rdrr.io/pkg/sp/man/is.projected.html">proj4string</a></span>(meuse) &lt;-<span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:28992"</span>) </a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co"># Automatic search and find of GRASS binaries</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co"># using the meuse sp data object for spatial referencing</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co"># This is the highly recommended linking procedure for on the fly jobs</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co"># </span><span class="al">NOTE</span><span class="co">: if more than one GRASS installation is found the highest version will be choosed</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse)</a></code></pre></div>
<p>Now do the same with <code>sf</code> based data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sf)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"> <span class="co"># get  data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"> nc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_read.html">st_read</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="dt">package=</span><span class="st">"sf"</span>))</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"> <span class="co"># Automatic search and find of GRASS binaries</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"> <span class="co"># using the nc sf data object for spatial referencing</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"> <span class="co"># This is the highly recommended linking procedure for on the fly jobs</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"> <span class="co"># </span><span class="al">NOTE</span><span class="co">: if more than one GRASS installation is found the highest version will be choosed</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"> </a>
<a class="sourceLine" id="cb6-12" data-line-number="12"> grass&lt;-<span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc,<span class="dt">returnPaths =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>The second most common situation is the usage of an existing <code>GRASS</code> location and project either with existing data sets or manually provided parameters.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(link2GI)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sf)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"> <span class="co"># proj folders</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"> projRootDir&lt;-<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>()</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"> paths&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/initProj.html">initProj</a></span>(<span class="dt">projRootDir =</span> projRootDir,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                          <span class="dt">projFolders =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"project1/"</span>))</a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"> <span class="co"># get  data</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"> nc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_read.html">st_read</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="dt">package=</span><span class="st">"sf"</span>))</a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"> <span class="co"># CREATE and link to a permanent GRASS folder at "projRootDir", location named "project1"</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc, <span class="dt">gisdbase =</span> projRootDir, <span class="dt">location =</span> <span class="st">"project1"</span>)</a>
<a class="sourceLine" id="cb7-14" data-line-number="14"></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"> <span class="co"># ONLY LINK to a permanent GRASS folder at "projRootDir", location named "project1"</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">gisdbase =</span> projRootDir, <span class="dt">location =</span> <span class="st">"project1"</span>, <span class="dt">gisdbase_exist =</span> <span class="ot">TRUE</span> )</a>
<a class="sourceLine" id="cb7-17" data-line-number="17"></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"> <span class="co"># setting up GRASS manually with spatial parameters of the nc data</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"> proj4_string &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(sp<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:28992"</span>))</a>
<a class="sourceLine" id="cb7-21" data-line-number="21"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">spatial_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">178605</span>,<span class="dv">329714</span>,<span class="dv">181390</span>,<span class="dv">333611</span>,proj4_string))</a>
<a class="sourceLine" id="cb7-22" data-line-number="22"></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"> <span class="co"># creating a GRASS gisdbase manually with spatial parameters of the nc data</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"> <span class="co"># additionally using a peramanent directory "projRootDir" and the location "nc_spatial_params "</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"> proj4_string &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(sp<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:4267"</span>))</a>
<a class="sourceLine" id="cb7-26" data-line-number="26"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">gisdbase =</span> projRootDir,</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">            <span class="dt">location =</span> <span class="st">"nc_spatial_params"</span>,</a>
<a class="sourceLine" id="cb7-28" data-line-number="28">            <span class="dt">spatial_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">84.32385</span>, <span class="fl">33.88199</span>,<span class="op">-</span><span class="fl">75.45698</span>,<span class="fl">36.58965</span>,proj4_string))</a></code></pre></div>
</div>
<div id="typical-for-specified-search-pathes-and-os" class="section level4">
<h4 class="hasAnchor">
<a href="#typical-for-specified-search-pathes-and-os" class="anchor"></a>Typical for specified search pathes and OS</h4>
<p>The full disk search can be cumbersome especially running Windos it can easily take 10 minutes and more. So it is helpful to provide a searchpath for narrowing down the search. Searching for <code>GRASS</code> installations in the home directory you may use the following command.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Link the GRASS installation and define the search location</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc, <span class="dt">search_path =</span> <span class="st">"~"</span>)</a></code></pre></div>
<p>If you already did a full search and kow your installation fo example using the command <code>findGRASS</code> you can use the result directly for linking.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/findGRASS.html">findGRASS</a></span>()</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">     instDir version installation_type</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="dv">1</span> <span class="op">/</span>opt<span class="op">/</span>grass   <span class="dv">7</span>.<span class="fl">8.1</span>           grass78</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># now linking it </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc,<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"/opt/grass"</span>,<span class="st">"7.8.15"</span>,<span class="st">"grass78"</span>)) </a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co"># corresponding linkage running windows</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc,<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C:/Program Files/GRASS GIS7.0.5"</span>,<span class="st">"GRASS GIS 7.0.5"</span>,<span class="st">"NSIS"</span>)) </a></code></pre></div>
</div>
<div id="manual-choosing-the-version" class="section level4">
<h4 class="hasAnchor">
<a href="#manual-choosing-the-version" class="anchor"></a>Manual choosing the version</h4>
<p>Finally some more specific examples related to interactive selection or OS specific settings. Choose manually the <code>GRASS</code> installation additionally using the meuse <code>sf</code> object for spatial referencing</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(nc, <span class="dt">ver_select =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="creating-a-permanent-gisbase-folder" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-a-permanent-gisbase-folder" class="anchor"></a>Creating a permanent gisbase folder</h4>
<p>Creating and linking a permanent <code>GRASS</code> gisdbase (folder structure) at “~/temp3” with the standard mapset “PERMANENT”" and the location named “project1”. For all spatial attributes use the the meuse <code>sf</code> object.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">x =</span> nc, </a>
<a class="sourceLine" id="cb11-2" data-line-number="2">                     <span class="dt">gisdbase =</span> <span class="st">"~/temp3"</span>,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">                     <span class="dt">location =</span> <span class="st">"project1"</span>)   </a></code></pre></div>
</div>
<div id="using-a-permanent-gisbase-folder" class="section level4">
<h4 class="hasAnchor">
<a href="#using-a-permanent-gisbase-folder" class="anchor"></a>Using a Permanent gisbase folder</h4>
<p>Link to the permanent <code>GRASS</code> gisdbase (folder structure) at “~/temp3” with the standard mapset “PERMANENT” and the location named “project1”. For all spatial attributes use the formerly referencend nc <code>sf</code> object parameter.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">gisdbase =</span> <span class="st">"~/temp3"</span>, <span class="dt">location =</span> <span class="st">"project1"</span>, </a>
<a class="sourceLine" id="cb12-2" data-line-number="2">                     <span class="dt">gisdbase_exist =</span> <span class="ot">TRUE</span>)   </a></code></pre></div>
</div>
<div id="manual-setup-of-the-spatial-attributes" class="section level4">
<h4 class="hasAnchor">
<a href="#manual-setup-of-the-spatial-attributes" class="anchor"></a>Manual Setup of the spatial attributes</h4>
<p>Setting up <code>GRASS</code> manually with spatial parameters of the meuse data</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">spatial_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">178605</span>,<span class="dv">329714</span>,<span class="dv">181390</span>,<span class="dv">333611</span>,</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">                              <span class="st">"+proj=sterea +lat_0=52.15616055555555 </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">                               +lon_0=5.38763888888889 +k=0.9999079 </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">                               +x_0=155000 +y_0=463000 +no_defs </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">                               +a=6377397.155 +rf=299.1528128</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">                               +towgs84=565.4171,50.3319,465.5524,</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="st">                                -0.398957,0.343988,-1.8774,4.0725</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="st">                               +to_meter=1"</span>)) </a></code></pre></div>
</div>
</div>
<div id="a-typical-usecase-for-the-orfeo-toolbox-wrapper" class="section level2">
<h2 class="hasAnchor">
<a href="#a-typical-usecase-for-the-orfeo-toolbox-wrapper" class="anchor"></a>A typical usecase for the Orfeo Toolbox wrapper</h2>
<p>link2GI supports the use of the Orfeo Toolbox with a listbased simple wrapper function. Actually two functions parse the modules and functions syntax dumps and generate a command list that is easy to modify with the necessary arguments.</p>
<p>Usually you have to get the module list first:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># link to the installed OTB </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">otblink&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkOTB.html">linkOTB</a></span>()</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co"># get the list of modules from the linked version</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">algo&lt;-<span class="kw"><a href="../reference/parseOTBAlgorithms.html">parseOTBAlgorithms</a></span>(<span class="dt">gili =</span> otblink)</a></code></pre></div>
<p>Based on the modules of the current version of <code>OTB</code> you can then choose the module(s) you want to use.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">## for the example we use the edge detection, </a>
<a class="sourceLine" id="cb15-2" data-line-number="2">algoKeyword&lt;-<span class="st"> "EdgeExtraction"</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## extract the command list for the choosen algorithm </a>
<a class="sourceLine" id="cb15-5" data-line-number="5">cmd&lt;-<span class="kw"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span>(<span class="dt">algo =</span> algoKeyword, <span class="dt">gili =</span> otblink)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## print the current command</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(cmd)</a></code></pre></div>
<p>Admittedly this is a very straightforward and preliminary approach. Nevertheless it provids you a valid list of all <code>OTB</code> API calls that can easily manipulated for your needs. The following working example will give you an idea how to use it.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(raster)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(listviewer)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5">otblink&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkOTB.html">linkOTB</a></span>()</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"> projRootDir&lt;-<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>()</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"> </a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"rgb"</span>)</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plotRGB.html">plotRGB</a></span>(rgb)</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">r&lt;-raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/writeRaster.html">writeRaster</a></span>(rgb, </a>
<a class="sourceLine" id="cb16-11" data-line-number="11">              <span class="dt">filename=</span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(projRootDir,<span class="st">"test.tif"</span>),</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">              <span class="dt">format=</span><span class="st">"GTiff"</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## for the example we use the edge detection, </a>
<a class="sourceLine" id="cb16-14" data-line-number="14">algoKeyword&lt;-<span class="st"> "EdgeExtraction"</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## extract the command list for the choosen algorithm </a>
<a class="sourceLine" id="cb16-17" data-line-number="17">cmd&lt;-<span class="kw"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span>(<span class="dt">algo =</span> algoKeyword, <span class="dt">gili =</span> otblink)</a>
<a class="sourceLine" id="cb16-18" data-line-number="18"></a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## get help using the convenient listviewer</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">listviewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/listviewer/man/jsonedit.html">jsonedit</a></span>(cmd<span class="op">$</span>help)</a>
<a class="sourceLine" id="cb16-21" data-line-number="21"></a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## define the mandantory arguments all other will be default</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">cmd<span class="op">$</span>input  &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(projRootDir,<span class="st">"test.tif"</span>)</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">cmd<span class="op">$</span>filter &lt;-<span class="st"> "touzi"</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25">cmd<span class="op">$</span>channel &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26">cmd<span class="op">$</span>out &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(projRootDir,<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"out"</span>,cmd<span class="op">$</span>filter,<span class="st">".tif"</span>))</a>
<a class="sourceLine" id="cb16-27" data-line-number="27"></a>
<a class="sourceLine" id="cb16-28" data-line-number="28">## run algorithm</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">retStack&lt;-<span class="kw"><a href="../reference/runOTB.html">runOTB</a></span>(cmd,<span class="dt">gili =</span> otblink)</a>
<a class="sourceLine" id="cb16-30" data-line-number="30"></a>
<a class="sourceLine" id="cb16-31" data-line-number="31">## plot filter raster on the green channel</a>
<a class="sourceLine" id="cb16-32" data-line-number="32"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(retStack)</a></code></pre></div>
</div>
</div>
<div id="advanced-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-examples" class="anchor"></a>Advanced examples</h1>
<p>A typical example is the usage of an already existing project database in <code>GRASS</code>. <code>GRASS</code> organizes all data in an internal file structure that is known as gisdbase folder, a mapset and one or more locations within this mapset. All raster and vector data is stored inside this structure and the organisation is performed by <code>GRASS</code>. So a typical task could be to work on data sets that are already stored in an existing <code>GRASS</code> structure</p>
<div id="creating-a-grass-project" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-grass-project" class="anchor"></a>Creating a GRASS project</h2>
<p>First of all we need some real world data. In this this case the gridded <a href="https://www.zensus2011.de/EN/2011Census/2011_Census_node.html">2011 micro zensus</a> <a href="https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/DemografischeGrunddaten/csv_Bevoelkerung_100m_Gitter.zip;jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=3">population data</a> of Germany. It has some nice aspects:</p>
<ul>
<li>It is provided in a typical authority format</li>
<li>It is big enough &gt;35 Mio points</li>
<li>It is pretty instructive for a lot of spatial analysis.</li>
</ul>
<p>We also have to download a <a href="https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/DemografischeGrunddaten/Datensatzbeschreibung_Bevoelkerung_100m_Gitter.xlsx;jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=2">meta data description file</a> (excel sheet) for informations about projection and data concepts and so on.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"> <span class="co"># we need some additional packages</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(curl)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co"># first of all we create  a project folder structure </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6">  link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/initProj.html">initProj</a></span>(<span class="dt">projRootDir =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),<span class="st">"/link2GI_examples"</span>), </a>
<a class="sourceLine" id="cb17-7" data-line-number="7">                    <span class="dt">projFolders =</span>  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"run/"</span>),</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">                    <span class="dt">path_prefix =</span> <span class="st">"path_"</span>,</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">                    <span class="dt">global =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co"># set runtime directory</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12">  <span class="kw"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span>(path_run)</a>
<a class="sourceLine" id="cb17-13" data-line-number="13"></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co"># get some typical authority generated data </span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15">  url&lt;-<span class="st">"https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="st">        DemografischeGrunddaten/csv_Bevoelkerung_100m_Gitter.zip;</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="st">        jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=3"</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"> res &lt;-<span class="st"> </span>curl<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/curl/reference/curl_download.html">curl_download</a></span>(url, <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"testdata.zip"</span>))</a>
<a class="sourceLine" id="cb17-19" data-line-number="19"></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co"># unzip it</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"> <span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(res,<span class="dt">files =</span> <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">".csv"</span>, <span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(res,<span class="dt">list =</span> <span class="ot">TRUE</span>)<span class="op">$</span>Name,<span class="dt">value =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb17-22" data-line-number="22">       <span class="dt">junkpaths =</span> <span class="ot">TRUE</span>, <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-23" data-line-number="23">fn &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="dt">pattern =</span> <span class="st">"[.]csv$"</span>, <span class="dt">path =</span> <span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>After downloading the data we will use it for some demonstration stuff. If you have a look the data is nothing than x,y,z with assuming some projection information.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># get the filename</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"> </a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co"># fast read with data.table </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"> xyz &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">fread</span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.csv"</span>))</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"> <span class="kw"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span>(xyz)</a></code></pre></div>
<p>We can easy rasterize this data as it is intentionally gridded data.that means we have in at a grid size of 100 by 100 meters a value.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(RColorBrewer)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(raster)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(mapview)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co"># clean dataframe</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"> xyz &lt;-<span class="st"> </span>xyz[,<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb19-8" data-line-number="8"></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co"># rasterize it according to the projection </span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"> r &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/rasterFromXYZ.html">rasterFromXYZ</a></span>(xyz,<span class="dt">crs =</span> sp<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:3035"</span>))</a>
<a class="sourceLine" id="cb19-11" data-line-number="11"></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co"># map it</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"> p &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">"Reds"</span>))</a>
<a class="sourceLine" id="cb19-15" data-line-number="15"> <span class="co"># aet resolution to 1 sqkm</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"> mapview<span class="op">::</span><span class="kw">mapviewOptions</span>(<span class="dt">mapview.maxpixels =</span> r<span class="op">@</span>ncols<span class="op">*</span>r<span class="op">@</span>nrows<span class="op">/</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb19-17" data-line-number="17"> mapview<span class="op">::</span><span class="kw">mapview</span>(r, <span class="dt">col.regions =</span> p, </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">                  <span class="dt">at =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">100</span>,<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">2500</span>), </a>
<a class="sourceLine" id="cb19-19" data-line-number="19">                  <span class="dt">legend =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>So far nothing new. Now we create a new but permanent <code>GRASS</code> gisbase using the spatial parameters from the raster object. As you know the <code>linkGRASS7</code> function performs a full search for one or more than one existing <code>GRASS</code> installations. If a valid <code>GRASS</code> installation exists all parameter are setup und the package <code>rgrass7</code> is linked.</p>
<p>Due to the fact that the <code>gisdbase_exist</code> is by default set to FALSE it will create a new structure according to the <code>R</code> object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="co"># initialize GRASS and set up a permanent structure  </span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">x =</span> r, </a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                    <span class="dt">gisdbase =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),<span class="st">"/link2GI_examples"</span>),</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">                    <span class="dt">location =</span> <span class="st">"microzensus2011"</span>)   </a></code></pre></div>
<p>Finally we can now import the data to the <code>GRASS</code> gisdbase using the <code>rgass7</code> package functionality.</p>
<p>First we must convert the raster object to <code>GeoTIFF</code> file. Any <code>GDAL</code> format is possible but <code>GeoTIFF</code> is very common and stable.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(raster)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(rgrass7)</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co"># write it to geotiff</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6">  raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/writeRaster.html">writeRaster</a></span>(r, <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.tif"</span>), </a>
<a class="sourceLine" id="cb21-7" data-line-number="7">                      <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co"># import raster to GRASS</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">rgrass7<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rgrass7/man/execGRASS.html">execGRASS</a></span>(<span class="st">'r.external'</span>,</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">                   <span class="dt">flags=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'o'</span>,<span class="st">"overwrite"</span>,<span class="st">"quiet"</span>),</a>
<a class="sourceLine" id="cb21-12" data-line-number="12">                   <span class="dt">input=</span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.tif"</span>),</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">                   <span class="dt">output=</span><span class="st">"Zensus_Bevoelkerung_100m_Gitter"</span>,</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">                   <span class="dt">band=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb21-15" data-line-number="15"></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co"># check imported data set</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17">rgrass7<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rgrass7/man/execGRASS.html">execGRASS</a></span>(<span class="st">'r.info'</span>,</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">                   <span class="dt">map =</span> <span class="st">"Zensus_Bevoelkerung_100m_Gitter"</span>) </a></code></pre></div>
<p>Let’s do now the same import as a vector data set. First we create a <code>sf</code> object. Please note this will take quite a while.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"> xyz_sf =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(xyz,</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">                    <span class="dt">coords =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x_mp_100m"</span>, <span class="st">"y_mp_100m"</span>),</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">                    <span class="dt">crs =</span> <span class="dv">3035</span>,</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">                    <span class="dt">agr =</span> <span class="st">"constant"</span>)</a>
<a class="sourceLine" id="cb22-5" data-line-number="5"></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="co">#map points</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"> sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot_sf</a></span>(xyz_sf)</a></code></pre></div>
<div id="usecases-presented-on-the-geostat-august-2018" class="section level3">
<h3 class="hasAnchor">
<a href="#usecases-presented-on-the-geostat-august-2018" class="anchor"></a>Usecases presented on the GEOSTAT August 2018</h3>
<p>During the <a href="http://opengeohub.org/node/146">GEOSTAT 2018</a> in Prague some more complex usescases have been presented.</p>
<div id="find-slides-and-materials" class="section level4">
<h4 class="hasAnchor">
<a href="#find-slides-and-materials" class="anchor"></a>Find slides and materials</h4>
<ul>
<li><a href="https://gisma.github.io/link2gi2018/link2gi2018.html#1">Presentation slides</a></li>
<li><a href="https://github.com/gisma/link2gi2018">Github Repository</a></li>
</ul>
</div>
<div id="the-examples" class="section level4">
<h4 class="hasAnchor">
<a href="#the-examples" class="anchor"></a>The examples</h4>
<ul>
<li>Basic usage of <code>SAGA</code> and <code>OTB</code> calls - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/saga-otb/useCaseSAGA-OTB.R">SAGA &amp; OTB basic usecase</a>
</li>
<li>Wrapping a <a href="https://neteler.gitlab.io/grass-gis-analysis/02_grass-gis_ecad_analysis/">GRASS GIS example</a> of Markus Neteler as presented on GEOSTAT 2018 - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/grass/useCaseGRASS-Neteler2018.R">Analysing the ECA&amp;D climatic data - reloaded</a>
</li>
<li>Performing a <code>GRASS</code> based cost analysis on a huge cost raster - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/cost-analysis/useCaseBeetle.R">Beetle spread over high asia</a>
</li>
<li>Deriving a canopy height model using a mixed API approach - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/uav-pc/useCaseCHM.R">Canopy Height Model from UAV derived point clouds</a>
</li>
</ul>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-is-link2gi">What is link2GI?</a></li>
      <li><a href="#why-link2gi-now">Why link2GI now?</a></li>
      <li><a href="#what-means-linking">What means linking?</a></li>
      <li>
<a href="#usage-of-the-link2gi-package---basic-examples">Usage of the link2GI package - Basic Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#brute-force-search-usage">Brute force search usage</a></li>
      <li><a href="#setting-up-project-structures">Setting up project structures</a></li>
      <li><a href="#linksaga---locate-and-set-up-saga-api-bindings">linkSAGA - Locate and set up ‘SAGA’ API bindings</a></li>
      <li><a href="#linkgrass7---locate-and-set-up-grass-7-api-bindings">linkGRASS7 - Locate and set up ‘GRASS 7’ API bindings</a></li>
      <li><a href="#a-typical-usecase-for-the-orfeo-toolbox-wrapper">A typical usecase for the Orfeo Toolbox wrapper</a></li>
      </ul>
</li>
      <li>
<a href="#advanced-examples">Advanced examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-grass-project">Creating a GRASS project</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Chris Reudenbach.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
