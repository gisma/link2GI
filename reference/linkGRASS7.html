<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Locate and set up 'GRASS 7' API bindings — linkGRASS7 • link2GI</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Locate and set up 'GRASS 7' API bindings — linkGRASS7" />
<meta property="og:description" content="Initializes the session environment and the system pathes for an easy acces to 
'GRASS GIS 7.x'.  The correct setup of the spatial and projection parameters is
 automatically performed by using either an existing and valid raster, sp or sf object, 
 or manually by providing a list containing the minimum parameters needed." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">link2GI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Version">0.4.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/link2GI1.html">Link GI to R</a>
    </li>
    <li>
      <a href="../articles/link2GI2.html">link2GI Basic Examples</a>
    </li>
    <li>
      <a href="../articles/link2GI3.html">linkGRASS7 real world data usecase</a>
    </li>
    <li>
      <a href="../articles/link2GI4.html">OTB Wrapper</a>
    </li>
    <li>
      <a href="../articles/link2GI5.html">GEOSTAT 2018 Examples</a>
    </li>
    <li>
      <a href="../articles/link2GI_third_party_software_installation.html">Installation guide for 3rd party Software related to link2GI</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/link2GI/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Locate and set up 'GRASS 7' API bindings</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-spatial/link2GI/blob/master/R/linkGRASS.R'><code>R/linkGRASS.R</code></a></small>
    <div class="hidden name"><code>linkGRASS7.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Initializes the session environment and the system pathes for an easy acces to 
<a href='https://grass.osgeo.org/'>'GRASS GIS 7.x'</a>.  The correct setup of the spatial and projection parameters is
 automatically performed by using either an existing and valid <code>raster</code>, <code>sp</code> or <code>sf</code> object, 
 or manually by providing a list containing the minimum parameters needed.<br /></p>
    </div>

    <pre class="usage"><span class='fu'>linkGRASS7</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='cn'>NULL</span>,
  default_GRASS7 <span class='op'>=</span> <span class='cn'>NULL</span>,
  search_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  ver_select <span class='op'>=</span> <span class='cn'>FALSE</span>,
  gisdbase_exist <span class='op'>=</span> <span class='cn'>FALSE</span>,
  gisdbase <span class='op'>=</span> <span class='cn'>NULL</span>,
  use_home <span class='op'>=</span> <span class='cn'>FALSE</span>,
  location <span class='op'>=</span> <span class='cn'>NULL</span>,
  spatial_params <span class='op'>=</span> <span class='cn'>NULL</span>,
  resolution <span class='op'>=</span> <span class='cn'>NULL</span>,
  quiet <span class='op'>=</span> <span class='cn'>TRUE</span>,
  returnPaths <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>raster or sp object</p></td>
    </tr>
    <tr>
      <th>default_GRASS7</th>
      <td><p>default is <code>NULL</code> If is <code>NULL</code> an automatic search for all installed versions is performed. 
If you provide a valid list the corresponding version is initialized. An example for OSGeo4W64 is: <code><a href='https://rdrr.io/r/base/c.html'>c("C:/OSGeo4W64","grass-7.0.5","osgeo4w")</a></code></p></td>
    </tr>
    <tr>
      <th>search_path</th>
      <td><p>path or mounting point that will be searched</p></td>
    </tr>
    <tr>
      <th>ver_select</th>
      <td><p>boolean if TRUE you may choose interactively the binary version (if found  more than one),  by default FALSE</p></td>
    </tr>
    <tr>
      <th>gisdbase_exist</th>
      <td><p>default is FALSE if set to TRUE the arguments gisdbase and location are expected to be an existing GRASS gisdbase</p></td>
    </tr>
    <tr>
      <th>gisdbase</th>
      <td><p>default is <code>NULL</code>, invoke <code><a href='https://rdrr.io/r/base/tempfile.html'>tempdir()</a></code> to the 'GRASS' database. Alternativeley you can provide a individual path.</p></td>
    </tr>
    <tr>
      <th>use_home</th>
      <td><p>default is <code>FALSE</code>, set the GISRC path to tempdir(), if TRUE the HOME or USERPROFILE setting is used for writing the GISRC file</p></td>
    </tr>
    <tr>
      <th>location</th>
      <td><p>default is <code>NULL</code>, invoke <code><a href='https://rdrr.io/r/base/basename.html'>basename(tempfile())</a></code> for defining the 'GRASS' location. Alternativeley you can provide a individual path.</p></td>
    </tr>
    <tr>
      <th>spatial_params</th>
      <td><p>default is <code>NULL</code>. Instead of a spatial object you may provide the geometry as a list. E.g. c(xmin,ymin,xmax,ymax,proj4_string)</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>resolution in map units for the GRASS raster cells</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>boolean  switch for supressing console messages default is TRUE</p></td>
    </tr>
    <tr>
      <th>returnPaths</th>
      <td><p>boolean if set to FALSE the pathes of the selected version are written 
to the PATH variable only, otherwise all paths and versions of the installed GRASS versions ae returned.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The concept is straightforward but for an all days usage helpful. Either you need to 
provide a <code>raster</code> or <code>sp</code> <code>sf</code> spatial object
 which has correct spatial and projection properties or you may link directlxy to an existing 'GRASS' gisdbase and mapset. 
 If you choose an spatial object to initialize a correct 'GRASS' mapset it is used to create either a temporary or a permanent 
 <a href='https://CRAN.R-project.org/package=rgrass7'>rgrass7</a> environment including the correct 'GRASS 7' structure.<br /><br />
 The most time consuming part on 'Windows' Systems is the search process. This can easily take 10 or more minutes. 
 To speed up this process you can also provide a correct parameter set. Best way to do so is to call <code>searchGRASSW</code> or for 'Linux' <code>searchGRASSX</code> manually. 
 and call <code>linkGRASS7</code> with the version arguments of your choice. linkGRASS7 initializes the usage of GRASS7.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>'GRASS GIS 7' is excellently supported by the
 <code>rgrass7</code> wrapper package. Nevertheless 'GRASS GIS' is well known for
 its high demands regarding the correct spatial and reference setup  
 of workspace and environment requirements. This becomes even worse on 'Windows' 
 platforms or if several alternative 'GRASS GIS' installations are available.
 If one knows what to do the <code>rgrass7</code> package setup function <code><a href='https://rdrr.io/pkg/rgrass7/man/initGRASS.html'>rgrass7::initGRASS</a></code> works fine under Linux. 
 This is also valid for well known configurations under the 'Windows' operation system. 
 Nevertheless on university lab or on company computers with restriced privileges and/or using different releases
 like the  <a href='http://trac.osgeo.org/osgeo4w/'>'OSGeo4W'</a> distribution and the  
 <a href='https://grass.osgeo.org/download/software/ms-windows/#stand-alone'>'GRASS 7' stand-alone</a> installation, 
 or different software releases (e.g. 'GRASS 7.0.5 and GRASS 7.2.0), it becomes often cumbersome or even impossible to get the correct linkages. <br /> 
 The function <code>linkGRASS7</code> tries to find all valid 'GRASS GIS' binaries by analyzing
 the startup script files of 'GRASS GIS'. After identifying the 'GRASS GIS' binaries all
 necessary system variables and settings will be generated and passed to a temporary R enviroment.</p>
<p>If you have more than one valid installation and run <code>linkGRASS7()</code> without arguments, you will be ask to select one.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Chris Reudenbach</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/r-spatial/link2GI/'>link2GI</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>

<span class='co'># proj folders</span>
<span class='va'>projRootDir</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>paths</span><span class='op'>&lt;-</span><span class='fu'>link2GI</span><span class='fu'>::</span><span class='fu'><a href='initProj.html'>initProj</a></span><span class='op'>(</span>projRootDir <span class='op'>=</span> <span class='va'>projRootDir</span>,
                         projFolders <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"project1/"</span><span class='op'>)</span><span class='op'>)</span>
                         
<span class='co'># get  data                         </span>
<span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shape/nc.shp"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Automatic search and find of GRASS binaries </span>
<span class='co'># using the nc sf data object for spatial referencing</span>
<span class='co'># This is the highly recommended linking procedure for on the fly jobs</span>
<span class='co'># NOTE: if more than one GRASS installation is found you have to choose. </span>
<span class='va'>grass</span><span class='op'>&lt;-</span><span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>,returnPaths <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='va'>grass</span><span class='op'>$</span><span class='va'>exist</span><span class='op'>)</span><span class='op'>{</span>

<span class='co'># CREATE and link to a permanent GRASS folder at "projRootDir", location named "project1" </span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>, gisdbase <span class='op'>=</span> <span class='va'>projRootDir</span>, location <span class='op'>=</span> <span class='st'>"project1"</span><span class='op'>)</span>   

<span class='co'># ONLY LINK to a permanent GRASS folder at "projRootDir", location named "project1" </span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span>gisdbase <span class='op'>=</span> <span class='va'>projRootDir</span>, location <span class='op'>=</span> <span class='st'>"project1"</span>, gisdbase_exist <span class='op'>=</span> <span class='cn'>TRUE</span> <span class='op'>)</span>   


<span class='co'># setting up GRASS manually with spatial parameters of the nc data</span>
<span class='va'>proj4_string</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/as.character.html'>as.character</a></span><span class='op'>(</span><span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span><span class='st'>"+init=epsg:28992"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span>spatial_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>178605</span>,<span class='fl'>329714</span>,<span class='fl'>181390</span>,<span class='fl'>333611</span>,<span class='va'>proj4_string</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'># creating a GRASS gisdbase manually with spatial parameters of the nc data </span>
<span class='co'># additionally using a peramanent directory "projRootDir" and the location "nc_spatial_params "</span>
<span class='va'>proj4_string</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/as.character.html'>as.character</a></span><span class='op'>(</span><span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span><span class='st'>"+init=epsg:4267"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span>gisdbase <span class='op'>=</span> <span class='va'>projRootDir</span>,
           location <span class='op'>=</span> <span class='st'>"nc_spatial_params"</span>,
           spatial_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>84.32385</span>, <span class='fl'>33.88199</span>,<span class='op'>-</span><span class='fl'>75.45698</span>,<span class='fl'>36.58965</span>,<span class='va'>proj4_string</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'>## Some more examples related to interactive selection or OS specific settings</span>

<span class='co'># SELECT the GRASS installation and define the search location</span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>, ver_select <span class='op'>=</span> <span class='cn'>TRUE</span>, search_path <span class='op'>=</span> <span class='st'>"~"</span><span class='op'>)</span>

<span class='co'># SELECT the GRASS installation </span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>, ver_select <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Typical osge4W installation (QGIS), using the meuse sp data object for spatial referencing</span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"C:/Program Files/QGIS 2.18"</span>,<span class='st'>"grass-7.2.1"</span>,<span class='st'>"osgeo4W"</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'># Typical osgeo4W installation (rootdir), using the meuse sp data object for spatial referencing </span>
<span class='fu'>linkGRASS7</span><span class='op'>(</span><span class='va'>nc</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"C:/OSGeo4W64/"</span>,<span class='st'>"grass-7.2.2"</span>,<span class='st'>"osgeo4W"</span><span class='op'>)</span><span class='op'>)</span>

<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Chris Reudenbach.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


